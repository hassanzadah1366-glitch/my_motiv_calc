import 'package:flutter/material.dart';
import 'dart:async';
import 'dart:math';

void main() => runApp(MotivCalcApp());

class MotivCalcApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: '????? ???? ???????',
      theme: ThemeData(primarySwatch: Colors.teal),
      home: CalculatorScreen(),
    );
  }
}

class CalculatorScreen extends StatefulWidget {
  @override
  _CalculatorScreenState createState() => _CalculatorScreenState();
}

class _CalculatorScreenState extends State<CalculatorScreen> {
  String output = "0";
  String _output = "0";
  double num1 = 0.0;
  double num2 = 0.0;
  String operand = "";

  final List<String> motivations = [
    "????? ??? ????!", "?? ?????????? ????.", "???? ???? ?? ?????? ???.", "???? ????? ???.", "???? ?? ?? ????.", 
    "?? ?????? ????? ?????.", "?? ???? ????? ????? ???.", "????? ????? ???.", "???? ?????? ?? ?? ??????? ??.", "??????? ?? ?????? ???.",
    "?? ???? ????????? ????.", "???? ??? ??.", "???????? ?? ????? ??.", "???????? ???? ??????.", "???? ???.", 
    "????? ?? ?? ???? ??????.", "?? ??? ?? ???? ???? ???.", "?? ??????? ?????.", "????? ?? ? ????? ???.", "?? ????????.",
    "???? ???.", "?????? ???.", "????? ?? ????.", "?????? ??? ?????.", "??? ???? ?????? ???.", 
    "?? ??? ???? ??.", "???? ?? ???? ????? ???.", "??? ????? ???.", "?????? ????? ???.", "?? ????? ?? ????.",
    "??????? ?? ????.", "??????? ???? ????.", "???? ?? ???? ?????.", "????? ????? ???? ??? ???.", "???? ?? ??? ????.", 
    "?????? ???? ???? ???.", "????? ???? ???.", "?? ????????? ??? ????.", "??? ????.", "??? ?? ????? ??.",
    "?? ????????.", "????? ????? ???? ??.", "??????? ???.", "???? ???? ?? ???.", "?? ????? ???.", 
    "?????? ???????.", "???? ???? ???.", "???? ?? ?? ???? ????.", "?????!", "????? ???? ???????.",
    "????????? ?? ???? ??.", "???? ?? ????? ???.", "???? ???? ??? ????? ???.", "???? ?? ???? ??.", "?????? ????? ???.", 
    "??? ???? ??? ???.", "?????? ???? ?? ????? ??.", "???? ?? ???? ??.", "????? ????? ????.", "?? ???? ???? ???? ??.",
    "?? ??????? ????.", "???? ????? ????.", "??????? ????? ????? ????.", "???????? ???.", "???? ?? ????? ??.", 
    "?? ????? ????? ???? ????.", "????? ?? ???? ???.", "???? ????? ??? ?? ??????.", "?? ???????? ???? ??.", "?????? ???? ??.",
    "???? ???.", "?? ????? ??????? ???.", "???? ?? ? ???? ??.", "???????? ?? ??? ??.", "?? ????? ????? ????.", 
    "???????????? ???.", "?? ???? ??? ???.", "????? ???? ??? ?? ????? ??????.", "??????? ?? ??? ????.", "???? ?? ????? ???.",
    "?? ????????.", "????? ???? ????.", "??? ????? ????? ???.", "????? ?? ?? ??.", "???? ????? ??.", 
    "???? ??? ????? ??????.", "?? ???????? ??? ???.", "?? ?????????????.", "??????? ?? ?? ????????.", "????? ?? ????? ?????.",
    "???? ????? ????? ??????.", "?????? ????? ????? ???.", "?????? ????.", "?? ?????? ?????.", "????? ??.", 
    "????? ?? ?????? ???.", "?????? ?? ???? ??.", "?????? ????? ??.", "????? ????? ??.", "??????? ???."
  ];

  late String currentQuote;
  Timer? _timer;

  @override
  void initState() {
    super.initState();
    currentQuote = motivations[0];
    _timer = Timer.periodic(Duration(seconds: 8), (timer) {
      setState(() {
        currentQuote = motivations[Random().nextInt(motivations.length)];
      });
    });
  }

  @override
  void dispose() { _timer?.cancel(); super.dispose(); }

  buttonPressed(String buttonText) {
    if (buttonText == "C") { _output = "0"; num1 = 0; num2 = 0; operand = ""; }
    else if (buttonText == "+" || buttonText == "-" || buttonText == "/" || buttonText == "X") {
      num1 = double.parse(output); operand = buttonText; _output = "0";
    } else if (buttonText == "=") {
      num2 = double.parse(output);
      if (operand == "+") _output = (num1 + num2).toString();
      if (operand == "-") _output = (num1 - num2).toString();
      if (operand == "X") _output = (num1 * num2).toString();
      if (operand == "/") _output = (num1 / num2).toString();
      operand = "";
    } else { _output = _output + buttonText; }

    setState(() {
      output = double.parse(_output).toStringAsFixed(0) == double.parse(_output).toString() 
               ? double.parse(_output).toInt().toString() : double.parse(_output).toString();
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.white,
      appBar: AppBar(title: Text("????? ???? ???????"), backgroundColor: Colors.teal),
      body: Column(
        children: <Widget>[
          Container(
            padding: EdgeInsets.all(20), margin: EdgeInsets.all(10),
            decoration: BoxDecoration(color: Colors.teal.shade50, borderRadius: BorderRadius.circular(15)),
            child: Text(currentQuote, textAlign: TextAlign.center, style: TextStyle(fontSize: 20, color: Colors.teal.shade900)),
          ),
          Container(alignment: Alignment.centerRight, padding: EdgeInsets.all(20), child: Text(output, style: TextStyle(fontSize: 60, fontWeight: FontWeight.bold))),
          Expanded(child: Divider()),
          Column(children: [
            Row(children: [buildBtn("7"), buildBtn("8"), buildBtn("9"), buildBtn("/", Colors.orange)]),
            Row(children: [buildBtn("4"), buildBtn("5"), buildBtn("6"), buildBtn("X", Colors.orange)]),
            Row(children: [buildBtn("1"), buildBtn("2"), buildBtn("3"), buildBtn("-", Colors.orange)]),
            Row(children: [buildBtn("C", Colors.red), buildBtn("0"), buildBtn("=", Colors.green), buildBtn("+", Colors.orange)]),
          ])
        ],
      ),
    );
  }

  Widget buildBtn(String txt, [Color clr = Colors.blueGrey]) {
    return Expanded(child: Container(margin: EdgeInsets.all(5), child: ElevatedButton(
      style: ElevatedButton.styleFrom(padding: EdgeInsets.all(20), backgroundColor: clr),
      child: Text(txt, style: TextStyle(fontSize: 22, color: Colors.white)),
      onPressed: () => buttonPressed(txt),
    )));
  }
}